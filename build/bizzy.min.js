window.B=function(){"use strict";function Bizzy(){}return Object.defineProperty(Bizzy.prototype,"utils",{value:{}}),Object.defineProperty(Bizzy.prototype,"templates",{value:{}}),Object.defineProperty(Bizzy.prototype,"views",{value:{}}),Object.defineProperty(Bizzy.prototype,"models",{value:{}}),new Bizzy}(),window.B.utils.Ajax=function(){"use strict";function Ajax(){this.__initialize()}return Object.defineProperty(Ajax.prototype,"__method",{writable:!0,value:"GET"}),Object.defineProperty(Ajax.prototype,"__url",{writable:!0,value:""}),Object.defineProperty(Ajax.prototype,"__sync",{writable:!0,value:!0}),Object.defineProperty(Ajax.prototype,"__data",{writable:!0,value:{}}),Object.defineProperty(Ajax.prototype,"__headers",{writable:!0,value:[]}),Object.defineProperty(Ajax.prototype,"__onCompleted",{writable:!0,value:function(){}}),Object.defineProperty(Ajax.prototype,"__onFailed",{writable:!0,value:function(){}}),Object.defineProperty(Ajax.prototype,"__xhr",{writable:!0,value:{}}),Object.defineProperty(Ajax.prototype,"__readyState",{writable:!0,value:[]}),Object.defineProperty(Ajax.prototype,"__status",{writable:!0,value:[]}),Object.defineProperty(Ajax.prototype,"__initialize",{value:function(){this.__defineXhr(),this.__defineReadyStateChange(),this.__defineReadyState(),this.__defineStatus()}}),Object.defineProperty(Ajax.prototype,"__defineXhr",{value:function(){this.__xhr=new window.XMLHttpRequest}}),Object.defineProperty(Ajax.prototype,"__defineReadyStateChange",{value:function(){this.__xhr.onreadystatechange=this.__onreadystatechange.bind(this)}}),Object.defineProperty(Ajax.prototype,"__defineReadyState",{valeu:function(){this.__readyState[0]=function(){},this.__readyState[1]=function(){},this.__readyState[2]=function(){},this.__readyState[3]=function(){},this.__readyState[4]=this.__finishedRequest.bind(this)}}),Object.defineProperty(Ajax.prototype,"__defineStatus",{value:function(){this.__status[200]=this.__completed.bind(this),this.__status[400]=this.__failed.bind(this),this.__status[401]=this.__failed.bind(this),this.__status[404]=this.__failed.bind(this),this.__status[500]=this.__failed.bind(this)}}),Object.defineProperty(Ajax.prototype,"__completed",{value:function(){this.__onCompleted(this.__xhr.responseText)}}),Object.defineProperty(Ajax.prototype,"__failed",{value:function(){this.__onFailed(this.__xhr.responseText)}}),Object.defineProperty(Ajax.prototype,"__finishedRequest",{value:function(){this.__status[this.__xhr.status]()}}),Object.defineProperty(Ajax.prototype,"__onreadystatechange",{value:function(){this.__readyState[this.__xhr.readyState]()}}),Object.defineProperty(Ajax.prototype,"__resetProperties",{value:function(){this.__method="GET",this.__url="",this.__sync=!0,this.__data={},this.__headers=[],this.__onCompleted=function(){},this.__onFailed=function(){}}}),Object.defineProperty(Ajax.prototype,"__addProperties",{value:function(config){for(var name in config)this.hasOwnProperty(name)&&(this[name]=config[name])}}),Object.defineProperty(Ajax.prototype,"__open",{value:function(){this.__xhr.open(this.__method,this.__url,this.__sync)}}),Object.defineProperty(Ajax.prototype,"__setRequestHeader",{value:function(){for(var i=this.__headers.length;--i;)this.__xhr.setRequestHeader(this.__headers[i].key,this.__headers[i].value)}}),Object.defineProperty(Ajax.prototype,"__send",{value:function(){this.__xhr.send(JSON.stringify(this.__data))}}),Object.defineProperty(Ajax.prototype,"__execute",{value:function(){this.__open(),this.__setRequestHeader(),this.__send()}}),Object.defineProperty(Ajax.prototype,"request",{value:function(config){this.__resetProperties(),this.__addProperties(config),this.__execute()}}),Ajax}(),window.B.utils.Dispatcher=function(){"use strict";function Dispatcher(){}return Object.defineProperty(Dispatcher.prototype,"__listeners",{writable:!0,value:[]}),Object.defineProperty(Dispatcher.prototype,"__getEvent",{value:function(event){return this.__listeners[event]=this.__listeners[event]||[],this.__listeners[event]}}),Object.defineProperty(Dispatcher.prototype,"on",{value:function(event,callback){this.__getEvent(event).push(callback)}}),Object.defineProperty(Dispatcher.prototype,"off",{value:function(event,callback){for(var listener=this.__getEvent(event),i=listener.length;--i;)listener[i]===callback&&delete listener[i]}}),Object.defineProperty(Dispatcher.prototype,"trigger",{value:function(event,data){for(var listener=this.__getEvent(event),i=listener.length;--i;)listener[i](data)}}),Dispatcher}(),window.B.utils.String=function(){"use string";function Str(){}return Object.defineProperty(Str.prototype,"format",{value:function(){var text=arguments[0],itens=Array.prototype.slice.call(arguments,1);return text.replace(/{(\d+)}/g,function(match,number){return itens[number]||""})}}),new Str}(),window.B.utils.Require=function(){"use strict";function Require(){}return Object.defineProperty(Require.prototype,"__ajax",{value:new window.B.utils.Ajax}),Object.defineProperty(Require.prototype,"__head",{value:window.document.querySelector("head")}),Object.defineProperty(Require.prototype,"__script",{value:window.document.createElement("script")}),Object.defineProperty(Require.prototype,"__appendChild",{value:function(data){this.__script.text=data,this.__head.appendChild(this.__script)}}),Object.defineProperty(Require.prototype,"use",{value:function(urlDocuments){urlDocuments.forEach(function(url){this.__ajax.request({url:url,sync:!1,onCompleted:this.__appendChild.bind(this)})},this)}}),new Require}(),window.B.utils.router=function(){"use strict";function RouterModel(config){this.__initialize(config)}function Router(){this.__initialize()}return Object.defineProperty(RouterModel.prototype,"segments",{writable:!0}),Object.defineProperty(RouterModel.prototype,"callback",{writable:!0}),Object.defineProperty(RouterModel.prototype,"__validator",{writable:!0}),Object.defineProperty(RouterModel.prototype,"__initialize",{value:function(config){this.segments=config.url.split("/"),this.callback="function"==typeof config.callback?config.callback:function(){}}}),Object.defineProperty(RouterModel.prototype,"__buildValidator",{value:function(){var regularExpression="",url=this.segments.join("/");regularExpression=url.replace(/{(\w+)}/g,function(){return"(\\w+)"}),this.__validator=new RegExp(window.B.uitls.String.format("^({0})$",regularExpression))}}),Object.defineProperty(RouterModel.prototype,"getParameters",{value:function(other){var i=other.segments.length,parameters=[];if(!this.equals(other))return[];for(;--i;)/^{(\d+)}$/i.test(this.segments[i])&&parameters.push(other.segments[i]);return parameters}}),Object.defineProperty(RouterModel.prototype,"equals",{value:function(other){this.__buildValidator(),this.equals=function(other){return this.__validator.test(other.url)}.bind(this)(other)}}),Object.defineProperty(Router.prototype,"__data",{writable:!0,value:{}}),Object.defineProperty(Router.prototype,"__initialize",{value:function(){window.addEventListener("hashchange",this.__hashchange.bind(this),!1)}}),Object.defineProperty(Router.prototype,"__hashchange",{value:function(){for(var i=this.__data.length,other=new RouterModel({url:window.location.hash.substr(1)});--i;)this.__data[i].equals(other)&&this.__data[i].callback(this.__data[i].getParameters(other))}}),Object.defineProperty(Router.prototype,"define",{value:function(routesDefination){for(var i=routesDefination.length;--i;)this.__data.push(new RouterModel(routesDefination[i]))}}),Object.defineProperty(Router.prototype,"start",{value:function(){window.dispatchEvent(new window.Event("hashchange"))}}),new Router}(),window.B.utils.Serialize=function(){"use strict";function Serialize(){this.__initialize()}return Object.defineProperty(Serialize.prototype,"__form",{writable:!0,value:{}}),Object.defineProperty(Serialize.prototype,"__data",{writable:!0,value:{}}),Object.defineProperty(Serialize.prototype,"__nodeName",{writable:!0,value:{}}),Object.defineProperty(Serialize.prototype,"_type",{writable:!0,value:{}}),Object.defineProperty(Serialize.prototype,"__initialize",{value:function(){this.__defineNodeName(),this.__defineType()}}),Object.defineProperty(Serialize.prototype,"__defineNodeName",{value:function(){this.__nodeName={INPUT:this.__searchForNodeType.bind(this),BUTTON:this.__searchForNodeType.bind(this),SELECT:this.__searchForNodeType.bind(this),TEXTAREA:this.__push.bind(this)}}}),Object.defineProperty(Serialize.prototype,"__defineType",{value:function(){this.__type={button:this.__push.bind(this),hidden:this.__push.bind(this),text:this.__push.bind(this),password:this.__push.bind(this),reset:this.__push.bind(this),"select-one":this.__push.bind(this),submit:this.__push.bind(this),checkbox:this.__pushChecked.bind(this),radio:this.__pushChecked.bind(this),"select-multiple":this.__pushSelectMultiple.bind(this),file:function(){}}}}),Object.defineProperty(Serialize.prototype,"__push",{value:function(element){this.__data[element.name]=element.value}}),Object.defineProperty(Serialize.prototype,"__pushChecked",{value:function(element){this.__data[element.name]=element.checked?element.value:null}}),Object.defineProperty(Serialize.prototype,"__pushSelectMultiple",{value:function(element){for(var i=element.options.length;--i;)this.__data[element.name]=element.options[i].selected?element.options[i].value:null}}),Object.defineProperty(Serialize.prototype,"__searchForNodeType",{value:function(element){this.__type[element.name](element)}}),Object.defineProperty(Serialize.prototype,"__serachForNodeName",{value:function(element){this.__nodeName[element.name](element)}}),Object.defineProperty(Serialize.prototype,"__execute",{value:function(){for(var i=this.__form.elements.length;--i;)""!==this.__form.elements[i].name&&this.__serachForNodeName(this.__form.elements[i])}}),Object.defineProperty(Serialize.prototype,"toJSON",{value:function(form){return form&&"FORM"===form.nodeName?(this.__form=form,this.__data={},this.__execute(),this.__data):{}}}),new Serialize}(),window.B.Mediator=function(){"use strict";return new window.B.utils.Dispatcher}(),window.B.Model=function(){"use strict";function Model(){this._initialize()}return Object.defineProperty(Model.prototype,"__dispatcher",{value:new window.B.utils.Dispatcher}),Object.defineProperty(Model.prototype,"_ajax",{value:new window.B.utils.Ajax}),Object.defineProperty(Model.prototype,"_headers",{writable:!0,value:[{key:"Content-Type",value:"application/json; charset=utf-8"}]}),Object.defineProperty(Model.prototype,"__url",{writable:!0,value:""}),Object.defineProperty(Model.prototype,"_url",{get:function(){return window.B.uitls.String.format("{0}/{1}",this.__url,this.data[this._idName])},set:function(value){this.__url=value}}),Object.defineProperty(Model.prototype,"_idName",{writable:!0}),Object.defineProperty(Model.prototype,"data",{writable:!0,value:{}}),Object.defineProperty(Model.prototype,"defaults",{writable:!0,value:{}}),Object.defineProperty(Model.prototype,"_initialize",{value:function(){this.reset()}}),Object.defineProperty(Model.prototype,"reset",{value:function(){var name="";for(name in this.defaults)this.data[name]=this.defaults[name].value;this.__dispatcher.trigger("model:reset",this.data)}}),Object.defineProperty(Model.prototype,"on",{value:function(event,callback){this.__dispatcher.on(event,callback)}}),Object.defineProperty(Model.prototype,"off",{value:function(event,callback){this.__dispatcher.off(event,callback)}}),Object.defineProperty(Model.prototype,"__completed",{value:function(data){this.data=JSON.parse(data),this.__dispatcher.trigger("model:completed",this.data)}}),Object.defineProperty(Model.prototype,"__failed",{value:function(data){this.__dispatcher.trigger("model:failed",JSON.parse(data))}}),Object.defineProperty(Model.prototype,"__request",{value:function(method){this._ajax.request({method:method,url:this._url,data:this.data,headers:this._headers,onCompleted:this.__completed.bind(this),onFailed:this.__failed.bind(this)})}}),Object.defineProperty(Model.prototype,"fetch",{value:function(){this.__dispatcher.trigger("model:fetch",this.data),this.__request("GET")}}),Object.defineProperty(Model.prototype,"save",{value:function(){this.__dispatcher.trigger("model:save",this.data),this.__request(this.data[this._idName]?"POST":"PUT")}}),Object.defineProperty(Model.prototype,"delete",{value:function(){this.__dispatcher.trigger("model:delete",this.data),this.__request("DELETE")}}),Model}(),window.B.View=function(){"use strict";function View(){this._initialize()}return Object.defineProperty(View.prototype,"_el",{writable:!0,value:{}}),Object.defineProperty(View.prototype,"_model",{writable:!0,value:{data:{}}}),Object.defineProperty(View.prototype,"_template",{writable:!0,value:function(){return{}}}),Object.defineProperty(View.prototype,"_events",{writable:!0,value:[]}),Object.defineProperty(View.prototype,"_subscribeEvents",{value:function(){var name="";for(name in this.events)window.document.querySelector(name.split(" ")[1]).addEventListener(name.split(" ")[0],this.events[name],!1)}}),Object.defineProperty(View.prototype,"_deleteEvents",{value:function(){var name="";for(name in this.events)window.document.querySelector(name.split(" ")[1]).removeEventListener(name.split(" ")[0],this.events[name],!1)}}),Object.defineProperty(View.prototype,"_initialize",{value:function(){}}),Object.defineProperty(View.prototype,"render",{value:function(){this._el.innerHTML=this._template(this._model.data),this._subscribeEvents()}}),Object.defineProperty(View.prototype,"destory",{value:function(){this._el.innerHTML="",this._deleteEvents()}}),View}();