window.B=function(BIZZY){"use strict";return BIZZY.utils={},BIZZY.templates={},BIZZY.views={},BIZZY.models={},BIZZY}(window.B||{}),window.B.utils.Ajax=function(){"use strict";function Ajax(){this.__initialize()}function FacadeAjax(){if(!(this instanceof FacadeAjax))return new FacadeAjax;var ajax=new Ajax,revelation={};return revelation.request=ajax.request,revelation}return Object.defineProperty(Ajax.prototype,"__method",{writable:!0,value:"GET"}),Object.defineProperty(Ajax.prototype,"__url",{writable:!0,value:""}),Object.defineProperty(Ajax.prototype,"__sync",{writable:!0,value:!0}),Object.defineProperty(Ajax.prototype,"__data",{writable:!0,value:{}}),Object.defineProperty(Ajax.prototype,"__headers",{writable:!0,value:[]}),Object.defineProperty(Ajax.prototype,"__onCompleted",{writable:!0,value:function(){}}),Object.defineProperty(Ajax.prototype,"__onFailed",{writable:!0,value:function(){}}),Object.defineProperty(Ajax.prototype,"__xhr",{writable:!0,value:{}}),Object.defineProperty(Ajax.prototype,"__readyState",{writable:!0,value:[]}),Object.defineProperty(Ajax.prototype,"__status",{writable:!0,value:[]}),Ajax.prototype.__initialize=function(){this.__defineXhr(),this.__defineReadyStateChange(),this.__defineReadyState(),this.__defineStatus()},Ajax.prototype.__defineXhr=function(){this.__xhr=new window.XMLHttpRequest},Ajax.prototype.__defineReadyStateChange=function(){this.__xhr.onreadystatechange=this.__onreadystatechange.bind(this)},Ajax.prototype.__defineReadyState=function(){this.__readyState[0]=function(){},this.__readyState[1]=function(){},this.__readyState[2]=function(){},this.__readyState[3]=function(){},this.__readyState[4]=this.__finishedRequest.bind(this)},Ajax.prototype.__defineStatus=function(){this.__status[200]=this.__completed.bind(this),this.__status[400]=this.__failed.bind(this),this.__status[401]=this.__failed.bind(this),this.__status[404]=this.__failed.bind(this),this.__status[500]=this.__failed.bind(this)},Ajax.prototype.__completed=function(){this.__onCompleted(this.__xhr.responseText)},Ajax.prototype.__failed=function(){this.__onFailed(this.__xhr.responseText)},Ajax.prototype.__finishedRequest=function(){this.__status[this.__xhr.status]()},Ajax.prototype.__onreadystatechange=function(){this.__readyState[this.__xhr.readyState]()},Ajax.prototype.__resetProperties=function(){this.__method="GET",this.__url="",this.__sync=!0,this.__data={},this.__headers=[],this.__onCompleted=function(){},this.__onFailed=function(){}},Ajax.prototype.__addProperties=function(config){for(var name in config)this.hasOwnProperty(name)&&(this[name]=config[name])},Ajax.prototype.__open=function(){this.__xhr.open(this.__method,this.__url,this.__sync)},Ajax.prototype.__setRequestHeader=function(){for(var i=this.__headers.length;--i;)this.__xhr.setRequestHeader(this.__headers[i].key,this.__headers[i].value)},Ajax.prototype.__send=function(){this.__xhr.send(JSON.stringify(this.__data))},Ajax.prototype.__execute=function(){this.__open(),this.__setRequestHeader(),this.__send()},Ajax.prototype.request=function(config){this.__resetProperties(),this.__addProperties(config),this.__execute()},FacadeAjax}(window.B||{}),window.B.utils.Dispatcher=function(){"use strict";function Dispatcher(){}function Facade(){if(!(this instanceof Facade))return new Facade;var dispatcher=new Dispatcher,revelation={};return revelation.on=dispatcher.on,revelation.off=dispatcher.off,revelation.trigger=dispatcher.trigger,revelation}return Object.defineProperty(Dispatcher.prototype,"__listeners",{writable:!0}),Dispatcher.prototype.__getEvent=function(event){return this.__listeners[event]=this.__listeners[event]||[],this.__listeners[event]},Dispatcher.prototype.on=function(event,callback){this.__getEvent(event).push(callback)},Dispatcher.prototype.off=function(event,callback){for(var listener=this.__getEvent(event),i=listener.length;--i;)listener[i]===callback&&delete listener[i]},Dispatcher.prototype.trigger=function(event,data){for(var listener=this.__getEvent(event),i=listener.length;--i;)listener[i](data)},Facade}(window.B||{}),window.B.utils.format=function(){"use string";function format(){var text=arguments[0],itens=Array.prototype.slice.call(arguments,1);return text.replace(/{(\d+)}/g,function(match,number){return itens[number]||""})}return format}(window.B||{}),window.B.utils.Require=function(BIZZY){"use strict";function Require(){}function Facade(){var require=new Require,revelation={};return revelation.use=require.use,revelation}return Object.defineProperty(Require.prototype,"__ajax",{value:new BIZZY.utils.Ajax}),Object.defineProperty(Require.prototype,"__head",{value:window.document.querySelector("head")}),Object.defineProperty(Require.prototype,"__script",{value:window.document.createElement("script")}),Require.prototype.__appendChild=function(data){this.__script.text=data,this.__head.appendChild(this.__script)},Require.prototype.use=function(urlDocuments){urlDocuments.forEach(function(url){this.__ajax.request({url:url,sync:!1,onCompleted:this.__appendChild.bind(this)})},this)},new Facade}(window.B||{}),window.B.utils.router=function(BIZZY){"use strict";function RouterModel(config){this.__initialize(config)}function Router(){this.__initialize()}function Facade(){var router=new Router,revelation={};return revelation.define=router.define,revelation.start=router.start,revelation}return Object.defineProperty(RouterModel.prototype,"segments",{writable:!0}),Object.defineProperty(RouterModel.prototype,"callback",{writable:!0}),Object.defineProperty(RouterModel.prototype,"__validator",{writable:!0}),RouterModel.prototype.__initialize=function(config){this.segments=config.url.split("/"),this.callback="function"==typeof config.callback?config.callback:function(){}},RouterModel.prototype.__buildValidator=function(){var regularExpression="",url=this.segments.join("/");regularExpression=url.replace(/{(\w+)}/g,function(){return"(\\w+)"}),this.__validator=new RegExp(BIZZY.uitls.format("^({0})$",regularExpression))},RouterModel.prototype.getParameters=function(other){var i=other.segments.length,parameters=[];if(!this.equals(other))return[];for(;--i;)/^{(\d+)}$/i.test(this.segments[i])&&parameters.push(other.segments[i]);return parameters},RouterModel.prototype.equals=function(other){this.__buildValidator(),this.equals=function(other){return this.__validator.test(other.url)}.bind(this)(other)},Object.defineProperty(Router.prototype,"__data",{writable:!0}),Router.prototype.__initialize=function(){window.addEventListener("hashchange",this.__hashchange.bind(this),!1)},Router.prototype.__hashchange=function(){for(var i=this.__data.length,other=new RouterModel({url:window.location.hash.substr(1)});--i;)this.__data[i].equals(other)&&this.__data[i].callback(this.__data[i].getParameters(other))},Router.prototype.define=function(routesDefination){for(var i=routesDefination.length;--i;)this.__data.push(new RouterModel(routesDefination[i]))},Router.prototype.start=function(){window.dispatchEvent(new window.Event("hashchange"))},new Facade}(window.B||{}),window.B.utils.serialize=function(){"use strict";function Serialize(){this.__initialize()}function Facade(){var serialize=new Serialize,revelation={};return revelation.toJSON=serialize.toJSON,revelation}return Object.defineProperty(Serialize.prototype,"__form",{writable:!0}),Object.defineProperty(Serialize.prototype,"__data",{writable:!0}),Object.defineProperty(Serialize.prototype,"__nodeName",{writable:!0,value:{}}),Object.defineProperty(Serialize.prototype,"_type",{writable:!0}),Serialize.prototype.__initialize=function(){this.__defineNodeName(),this.__defineType()},Serialize.prototype.__defineNodeName=function(){this.__nodeName={INPUT:this.__searchForNodeType.bind(this),BUTTON:this.__searchForNodeType.bind(this),SELECT:this.__searchForNodeType.bind(this),TEXTAREA:this.__push.bind(this)}},Serialize.prototype.__defineType=function(){this.__type={button:this.__push.bind(this),hidden:this.__push.bind(this),text:this.__push.bind(this),password:this.__push.bind(this),reset:this.__push.bind(this),"select-one":this.__push.bind(this),submit:this.__push.bind(this),checkbox:this.__pushChecked.bind(this),radio:this.__pushChecked.bind(this),"select-multiple":this.__pushSelectMultiple.bind(this),file:function(){}}},Serialize.prototype.__push=function(element){this.__data[element.name]=element.value},Serialize.prototype.__pushChecked=function(element){this.__data[element.name]=element.checked?element.value:null},Serialize.prototype.__pushSelectMultiple=function(element){for(var i=element.options.length;--i;)this.__data[element.name]=element.options[i].selected?element.options[i].value:null},Serialize.prototype.__searchForNodeType=function(element){this.__type[element.name](element)},Serialize.prototype.__serachForNodeName=function(element){this.__nodeName[element.name](element)},Serialize.prototype.__execute=function(){for(var i=this.__form.elements.length;--i;)""!==this.__form.elements[i].name&&this.__serachForNodeName(this.__form.elements[i])},Serialize.prototype.toJSON=function(form){return form&&"FORM"===form.nodeName?(this.__form=form,this.__data={},this.__execute(),this.__data):{}},new Facade}(window.B||{}),window.B.Mediator=function(BIZZY){"use strict";return new BIZZY.utils.Dispatcher}(window.B||{}),window.B.Model=function(BIZZY){"use strict";function Model(){this._initialize(),BIZZY.utils.Dispatcher.call(this)}function Facade(){if(!(this instanceof Facade))return new Facade;var model=new Model,revelation={};return revelation._initialize=model._initialize,revelation._ajax=model._ajax,revelation._headers=model._headers,revelation._url=model._url,revelation._idName=model._idName,revelation.data=model.data,revelation.onCompleted=model.onCompleted,revelation.onFailed=model.onFailed,revelation.reset=model.reset,revelation.fetch=model.fetch,revelation.save=model.save,revelation.delete=model.delete,revelation}return Object.defineProperty(Model.prototype,"__dispatcher",{value:new BIZZY.utils.Dispatcher}),Object.defineProperty(Model.prototype,"_ajax",{value:new BIZZY.utils.Ajax}),Object.defineProperty(Model.prototype,"_headers",{writable:!0,value:[{key:"Content-Type",value:"application/json; charset=utf-8"}]}),Object.defineProperty(Model.prototype,"__url",{writable:!0,value:""}),Object.defineProperty(Model.prototype,"_url",{get:function(){return BIZZY.uitls.format("{0}/{1}",this.__url,this.data[this._idName])},set:function(value){this.__url=value}}),Object.defineProperty(Model.prototype,"_idName",{writable:!0}),Object.defineProperty(Model.prototype,"data",{writable:!0,value:{}}),Object.defineProperty(Model.prototype,"defaults",{writable:!0,value:{}}),Model.prototype._initialize=function(){this.reset()},Model.prototype.reset=function(){var name="";for(name in this.defaults)this.data[name]=this.defaults[name].value;this.__dispatcher.trigger("model:reset",this.data)},Model.prototype.on=function(event,callback){this.__dispatcher.on(event,callback)},Model.prototype.off=function(event,callback){this.__dispatcher.off(event,callback)},Model.prototype.__completed=function(data){this.data=JSON.parse(data),this.__dispatcher.trigger("model:completed",this.data)},Model.prototype.__failed=function(data){this.__dispatcher.trigger("model:failed",JSON.parse(data))},Model.prototype.__request=function(method){this._ajax.request({method:method,url:this._url,data:this.data,headers:this._headers,onCompleted:this.__completed.bind(this),onFailed:this.__failed.bind(this)})},Model.prototype.fetch=function(){this.__dispatcher.trigger("model:fetch",this.data),this.__request("GET")},Model.prototype.save=function(){this.__dispatcher.trigger("model:save",this.data),this.__request(this.data[this._idName]?"POST":"PUT")},Model.prototype.delete=function(){this.__dispatcher.trigger("model:delete",this.data),this.__request("DELETE")},Facade}(window.B||{}),window.B.View=function(){"use strict";function View(){this._initialize()}return Object.defineProperty(View.prototype,"_el",{writable:!0,value:{}}),Object.defineProperty(View.prototype,"_model",{writable:!0,value:{data:{}}}),Object.defineProperty(View.prototype,"_template",{writable:!0,value:function(){return{}}}),Object.defineProperty(View.prototype,"events",{writable:!0,value:[]}),View.prototype._subscribeEvents=function(){var name="";for(name in this.events)window.document.querySelector(name.split(" ")[1]).addEventListener(name.split(" ")[0],this.events[name],!1)},View.prototype._deleteEvents=function(){var name="";for(name in this.events)window.document.querySelector(name.split(" ")[1]).removeEventListener(name.split(" ")[0],this.events[name],!1)},View.prototype._initialize=function(){},View.prototype.render=function(){this._el.innerHTML=this._template(this._model.data),this._subscribeEvents()},View.prototype.destory=function(){this._el.innerHTML="",this._deleteEvents()},View}();